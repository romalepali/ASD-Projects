function arrayMove(arr,fromIndex,toIndex){var element=arr[fromIndex];arr.splice(fromIndex,1),arr.splice(toIndex,0,element)}function message_popup(message,type,timeout){$("#popup_info_msg").remove();var mes_class=type==TYPE_ERROR?"error":"success",mes_delay=2e3;mes_class==TYPE_SUCCESS&&(mes_delay=700),timeout=timeout||mes_delay;var textMessage=message.text?message.text:message;$('<div id="popup_info_msg" class="'+mes_class+'"><b></b><div>'+textMessage+"</div></div>").appendTo("body").fadeIn(300).delay(timeout).fadeOut(500)}function stars_fill(rating,is_hover){var classes={full:"cur",half:"cur__half",hover:"hovered"};$("div.voting").each(function(index){$(this).children("a").removeClass(classes.full+" "+classes.half+" "+classes.hover).each(function(index){$(this).addClass(getStarClass(index,rating,classes,is_hover))})}),$("div.vote-success").html(votes_arr[Math.round(rating)])}function getStarClass(index,rating,classes,is_hovered){var double_rating=Math.round(2*rating),int_rating=Math.floor(double_rating/2);return index<=int_rating-1?is_hovered?classes.hover:classes.full:index==int_rating&&double_rating%2==1?classes.half:""}function increase_votes(step){current_rating_count+=step,$("div.v_c").text(" x "+current_rating_count)}function initFontsize(){var size=parseInt($.cookie("tabs_font_size")?$.cookie("tabs_font_size"):$.cookie("tabs_font_size_all"));0!=size&&size<=FONTSIZE_MODIFIER_MAX&&size>=FONTSIZE_MODIFIER_MIN?onFontsizeClick(size):$.cookie("tabs_font_size_all",0,{expires:365,path:"/",domain:ug_serv})}function widgetScrollValue(prefix,step,old_val,new_val){var sign=new_val>0?"+":"",direction_hide=step>0?"down":"up",direction_show=step<0?"down":"up",$widget_content_val=$("#"+prefix+"_content_val"),$widget_val=$("#"+prefix+"_val"),$widget=$("#"+prefix);if(0==new_val)return void $widget_val.hide("drop",{direction:direction_hide},scroll_value_duration,function(){$widget_content_val.text(0),$widget.show("drop",{direction:direction_show},scroll_value_duration)});0!=old_val?$widget_content_val.hide("drop",{direction:direction_hide},scroll_value_duration,function(){$widget_content_val.text(sign+new_val),$widget_content_val.show("drop",{direction:direction_show},scroll_value_duration)}):$widget.hide("drop",{direction:direction_hide},scroll_value_duration,function(){$widget_content_val.text(sign+new_val),$widget_val.show("drop",{direction:direction_show},scroll_value_duration)})}function onTransposeClick(step){if(!is_transpose_locked&&0!=step){is_transpose_locked=!0;var old_transpose=current_transpose;current_transpose=(current_transpose+step)%12,step=0==current_transpose?-old_transpose:step,save_transpose_state_to_local_storage(),transpose(acc_tuning,step,function(){$("#cont span").each(function(){var $this=$(this),ch=$this.text();for(var ac in applicature)if(applicature[ac].old_ch==ch){$this.text(ac);break}}),create_chords_list(),$("div.chord-variations-wrapper.ui-draggable").each(function(){var $widget=$(this),ch=$widget.find("div.diag_head").text(),options={},chord_id=$widget.data("chord_id");chord_id&&(options.chord_id=chord_id);for(var ac in applicature)if(applicature[ac].old_ch==ch){$widget.html(create_applicature_widget(ac,acc_tuning,options).html());break}})},{}),widgetScrollValue("transpose",step,old_transpose,current_transpose)}}function save_transpose_state_to_local_storage(){0!=isLocalStorageAvailable()&&0!=isJsonAvailable()&&(0!=current_transpose?saved_transposed_states[tabid]=current_transpose:null!=saved_transposed_states[tabid]&&delete saved_transposed_states[tabid],localStorage.setItem("tabs_transpose_states",JSON.stringify(saved_transposed_states)))}function get_transpose_state_from_local_storage(){if(0!=isLocalStorageAvailable()&&0!=isJsonAvailable()){var tabs_transpose_states=localStorage.getItem("tabs_transpose_states");try{null!=tabs_transpose_states&&tabs_transpose_states.length>2?(saved_transposed_states=JSON.parse(tabs_transpose_states),null!=saved_transposed_states[tabid]&&onTransposeClick(saved_transposed_states[tabid])):saved_transposed_states={}}catch(err){saved_transposed_states={},localStorage.setItem("tabs_transpose_states",JSON.stringify(saved_transposed_states))}}}function onFontsizeClick(step){if(0!=step){var new_fontsize_counter=current_fontsize_counter+step;if(!(new_fontsize_counter<FONTSIZE_MODIFIER_MIN||new_fontsize_counter>FONTSIZE_MODIFIER_MAX)){var old_fontsize_counter=current_fontsize_counter;ga_track_event(["_trackEvent","Tab Page","Font Size","Font Size "+(step>0?"Plus":"Minus")]),current_fontsize_counter=new_fontsize_counter,current_fontsize+=2*step,$("#cont").children("pre").css("font-size",current_fontsize+"px"),$(document).trigger("changefontsize"),$.cookie("tabs_font_size")&&(current_fontsize_counter=parseInt($.cookie("tabs_font_size")),$.cookie("tabs_font_size",null,{domain:"tabs"+ug_serv,path:"/"})),$.cookie("tabs_font_size_all",current_fontsize_counter,{expires:365,path:"/",domain:ug_serv}),widgetScrollValue("fontsize",step,old_fontsize_counter,current_fontsize_counter)}}}function onVariationsClick(params){all_applicatures_loaded?showVariations(params):transpose(acc_tuning,0,function(_params){onAllVariationsLoaded(function(){showVariations(_params)})},params)}function onAllVariationsLoaded(callback,params){$("div.chord-variations-wrapper").each(function(){var $this=$(this),chord_id=$this.data("chord_id"),ch=$this.find("div.diag_head").text(),applicature_item=null;if(void 0!==(ch=Chord.convertChordName(ch))){applicature_item=chord_id?getCustomApplicature(chord_id):applicature[ch];var vars_list=build_variations_list(applicature_item,acc_tuning);$this.find("div.chords_versions_handler").html(render_variations_list(vars_list)+render_variations_controls(vars_list))}}),callback(params)}function showVariations(params){var $variations_button=params.button,$wrapper=$variations_button.closest("div.chord-variations-wrapper");ui_dragable!=$wrapper.css("z-index")&&(ui_dragable++,$wrapper.css("z-index",ui_dragable));var from_display_chords=void 0!=$wrapper.parents("#chords_list").get(0),label=from_display_chords?"Display Chords":"Highlight chords";if(label+=" Variations",label+=$variations_button.parent().children(".chords_versions_handler").is(":visible")?" Hide":" Show",ga_track_event(["_trackEvent","Tab Page","Chords",label]),$variations_button.parent().children(".chords_versions_handler").is(":visible"))$variations_button.parent().children(".chords_versions_handler").fadeOut(1),$variations_button.parent().delay(100).css("width","0"),$wrapper.hasClass("ui_not-draggable")&&$variations_button.parent().parent().removeClass("hover");else{$variations_button.parent().children(".chords_versions_handler").fadeIn(100),$variations_button.parent().css("width","214px");var $chords_scroller=$variations_button.parent().find("div.chords_versions_scroller_moveable"),chords_applicatures_cont=$chords_scroller.find("div.cont_chrd").length,chords_versions_scroller_moveable_width=ver_w*chords_applicatures_cont,checkright_button=-(chords_versions_scroller_moveable_width-214);$chords_scroller.css("width",chords_versions_scroller_moveable_width+"px");var chords_first_check=parseInt($chords_scroller.css("margin-left"));0==chords_first_check?$variations_button.parent().find("div.chords_versions_controls_left").fadeOut(100):chords_first_check==checkright_button&&$variations_button.parent().find("div.chords_versions_controls_right").fadeOut(100),$variations_button.parent().parent().addClass("hover")}}function str_pad(input,pad_length,pad_string,pad_type){var pad_to_go,half="",str_pad_repeater=function(s,len){for(var collect="";collect.length<len;)collect+=s;return collect=collect.substr(0,len)};return"STR_PAD_LEFT"!=pad_type&&"STR_PAD_RIGHT"!=pad_type&&"STR_PAD_BOTH"!=pad_type&&(pad_type="STR_PAD_RIGHT"),(pad_to_go=pad_length-input.length)>0&&("STR_PAD_LEFT"==pad_type?input=str_pad_repeater(pad_string,pad_to_go)+input:"STR_PAD_RIGHT"==pad_type?input+=str_pad_repeater(pad_string,pad_to_go):"STR_PAD_BOTH"==pad_type&&(half=str_pad_repeater(pad_string,Math.ceil(pad_to_go/2)),input=half+input+half,input=input.substr(0,pad_length))),input}function modulate_accord(acc,tune){if(tune=parseInt(tune,10),-1!=acc.indexOf("/")){var acc_arr=acc.split("/");if("9"!=acc_arr[1]){for(var i=0;i<acc_arr.length;i++)acc_arr[i]=modulate_accord(acc_arr[i],tune);return acc_arr.join("/")}}var acc_parse=acc.charAt(0).toUpperCase()+acc.substring(1);"H"==acc_parse.charAt(0)&&(acc_parse="B"+acc_parse.substring(1)),"B"==acc_parse.charAt(0)&&-1!=acc_parse.indexOf("#")&&(acc_parse=acc_parse.replace("#",""),acc_parse="C"+acc_parse.substring(1)),"E"==acc_parse.charAt(0)&&-1!=acc_parse.indexOf("#")&&(acc_parse=acc_parse.replace("#",""),acc_parse="F"+acc_parse.substring(1));var str_acc="";if(-1!=acc_parse.indexOf("#"))str_acc=acc_parse.charAt(0)+"#";else if(-1!=acc_parse.substring(1).indexOf("b")){for(var key,i=1;i<=cnt;i++)if(accords[i]==acc_parse.charAt(0)){key=i;break}1==key?key=cnt:key--,str_acc=accords[key]}else str_acc=acc_parse.charAt(0);for(var i=1;i<=cnt;i++)if(accords[i]==str_acc){key=i;break}return key+=tune,key<1&&(key+=cnt),key>cnt&&(key-=cnt),-1!=acc_parse.indexOf("#")?acc_parse=acc_parse.replace("#",""):-1!=acc_parse.substring(1).indexOf("b")&&(acc_parse=acc_parse.replace("b","")),acc_parse=accords[key]+acc_parse.substring(1)}function ajax_change_ch_applicatures(chords,tuning,applicaturesLoadedCallback,callbackParams){chords.tuning=tuning,$.ajax({type:"GET",url:"//tabs."+UGAPP.config.main_server+"/applicature/?appl_api_version="+get_appl_api_version()+"&instr="+instr+"&callback=?",data:chords,dataType:"json",timeout:2e4,success:function(applicatures){applicature=applicatures,all_applicatures_loaded=!0,is_transpose_locked=!1,applicaturesLoadedCallback&&callbackParams&&applicaturesLoadedCallback(callbackParams)}})}function transpose(tuning,to,applicaturesLoadedCallback,callbackParams){$("#print_link").attr("href",first_link+"&transpose="+current_transpose);var parsed_chords={};for(var k in applicature)parsed_chords[k]=0==to?modulate_accord(k,-current_transpose):modulate_accord(k,to);parsed_chords=ChordsMap.postModulate(parsed_chords),ajax_change_ch_applicatures(parsed_chords,tuning,applicaturesLoadedCallback,callbackParams)}function trim(str,charlist){charlist=charlist?charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):"  ";var re=new RegExp("^["+charlist+"]+|["+charlist+"]+$","g");return str.replace(re,"")}function remove_frets_before_modulate(acc){var reg=/\([0-9XIV fr\.]+\)/,result=acc.replace(reg,"");return result=trim(result)}function scrollerSwitch(){$(".sticky--consolidate").on("click",function(){if($(".sticky--consolidate").toggleClass("on"),$(".sticky").Stickyfill(),$(".sticky--consolidate").is(".on"))Stickyfill.rebuild;else{Stickyfill.kill(),$(".sticky--consolidate").removeClass("on");try{yaCounter18746557.reachGoal("SCROLLED_CHORDS_CLOSE")}catch(e){}}})}function create_chords_list(){var chords_count=0,chord_name=null,count_class="",is_custom=!1,applicature_list=$.extend({},applicature,0==current_transpose?custom_applicatures:{});$(".chord-variations-wrapper").each(function(){$(this).remove()});for(var chord in applicature_list){is_custom=chord in custom_applicatures,chord_name=is_custom?custom_applicatures[chord].chord:chord,chords_count++,count_class="",chords_count%6!=0&&(chords_count+1)%6!=0||(count_class+=" last6"),chords_count%4!=0&&(chords_count+1)%4!=0||(count_class+=" last4");var options={count_class:count_class};is_custom&&(options=$.extend(options,{chord_id:chord}));display_widget(create_applicature_widget(chord_name,acc_tuning,options),null,!1)}$("#chords_list div.chord-variations-wrapper").on("mouseleave",function(){var $this=$(this);$this.find(".chords_versions_handler").is(":visible")||$this.removeAttr("style")})}function display_widget($widget,$chord,is_draggable){if(is_draggable){var offset=$chord.offset();offset.top-=180,offset.left+=21,ui_dragable_firsttime=ui_dragable++,$widget.addClass("ui-draggable"),$widget.addClass("was_not_draged"),$widget.addClass("hover"),$widget.appendTo("body"),$.extend($widget,{isBinded:!0,chord:$chord}),$.extend($chord,{unbindWidget:function(){$chord.removeClass("has_undragable"),$chord.off("mouseleave"),$widget.isBinded=!1,clearTimeout($chord.leaveTimer)},removeWidget:function(){$chord.unbindWidget(),$widget.remove()},startLeaveTimer:function(){$widget.addClass("removeable"),$chord.leaveTimer=setTimeout(function(){clearTimeout($chord.leaveTimer),$chord.removeWidget()},200)},stopLeaveTimer:function(){clearTimeout($chord.leaveTimer),$widget.removeClass("removeable")},leaveTimer:null}),$widget.css({position:"absolute",top:offset.top,left:offset.left,"z-index":ui_dragable_firsttime}),$widget.draggable({handle:".diag_head",containment:"#scroll_holder",start:function(event,ui){var $obj=ui.helper;$obj.removeClass("was_not_draged"),$obj.removeClass("removeable"),$chord.unbindWidget(),ui_dragable!=$obj.css("z-index")&&(ui_dragable++,$obj.css("z-index",ui_dragable))}}),$chord.on("mouseleave",function(){return $chord.startLeaveTimer(),!1}),$widget.on("mouseover",function(){$widget.isBinded&&$chord.stopLeaveTimer()}),$widget.on("mouseleave",function(){$widget.find(".chords_versions_handler").is(":visible")||($widget.isBinded?$chord.startLeaveTimer():$widget.removeClass("hover"))}),$widget.find(".diag_head a").on("click",function(){return $widget.isBinded?$chord.removeWidget():$widget.remove(),!1})}else $widget.addClass("ui_not-draggable"),$widget.find(".diag_head img").remove(),$widget.appendTo("#chords_list");$widget.find(".main_chord_with_play").find(".chfret_clicked_label").css("display","none"),$widget.show()}function bind_hover(){$("#cont span").off("mouseover"),$("#cont span").each(function(){var $chord=$(this);$chord.on("mouseover",function(e){if(void 0!==$chord.leaveTimer&&$chord.stopLeaveTimer(),$chord.hasClass("has_undragable"))return!1;$chord.addClass("has_undragable");var ch=$chord.text(),options={vars_left:!1};return $chord.data("app")&&(options.chord_id=$chord.data("app")),display_widget(create_applicature_widget(ch,acc_tuning,options),$chord,!0),!1})})}function hide_scroller_widget(){$(".autoscroll_controller").fadeOut(100),$(".b_a").removeClass("b_ac"),tab_scroller.setHeight(0,!0),tab_scroller.changeSpeed(0)}function hide_scroll(){"none"==document.getElementById("scroll").style.display?($("#scroll").show(),$("#arr_scroll").css({background:"url("+document.location.protocol+"//"+js_img_domain+"/img/arr.gif) 0px -40px"})):($("#scroll").hide(),$("#arr_scroll").css({background:"url("+document.location.protocol+"//"+js_img_domain+"/img/arr.gif)"}))}function viewComments(comment_id,need_scroll,need_show_reply){$(".comments_dub").addClass("active"),$(".comments-ajax-loader").show(),0==comment_id&&$("html, body").animate({scrollTop:$("#comments").offset().top-50},2e3),already_comment_loaded?need_scroll&&scroll_to_comments(comment_id):(already_comment_loaded=!0,$.ajax({type:"GET",url:"/comment/",dataType:"html",data:"tabid="+tabid,success:function(data){$(".tabcomms").html(data),$(".comments-ajax-loader").hide(),$("#comments").show(),show_bad_comments=!1,need_scroll&&(scroll_to_comments(comment_id),need_show_reply&&($("#c_"+comment_id+" .commreply").trigger("click"),$("#c_"+comment_id+" textarea").focus()))}}))}function scroll_to_comments(comment_id){if(0==comment_id)var scroll_to="#comments";else var scroll_to="#c_"+comment_id;$("html, body").animate({scrollTop:$(scroll_to).offset().top-20},1500,function(e){$(scroll_to).offset().top-$(document).scrollTop()>30&&$("html, body").animate({scrollTop:$(scroll_to).offset().top-20},500)})}function show_comments(){var comment_id=getURLParameter("reply_to");comment_id>0?viewComments(comment_id,!0,!0):(comment_id=parseInt((window.location.hash.match(RegExp("#c_([0-9]*)"))||[null,0])[1]))&&viewComments(comment_id,!0,!1)}function get_appl_api_version(){return"undefined"==typeof appl_api_version?2:appl_api_version}function showPlayer(){isAudioSupported&&($("body").removeClass("audio-not-supported").addClass("audio-supported"),$(document).on("mouseenter","div.play-on-hover .chfret",function(){var $this=$(this),$wrapper=$this.closest(".main_chord_with_play"),$icon=$wrapper.find("i"),$icon_text=$wrapper.find("span"),notes_string=$wrapper.find(".play_applicature_button").attr("rel");ga_track_event(["_trackEvent","Tab Page","Chords",(void 0!=$wrapper.parents("#chords_list").get(0)?"Display chords":"Highlight chords")+" Play"]),$wrapper.find("b").fadeOut(function(){$wrapper.find("b").fadeIn()});var callbacks={beforeFontLoad:function(){$icon.addClass("sf-load")},afterFontLoad:function(){$icon.removeClass("sf-load"),$("body").addClass("sf-loaded")},playStarted:function(){$icon.removeClass("sf-load"),$icon.hasClass("sf-play")||($icon.addClass("sf-play"),$icon_text.text("playing"));var counter=void 0===$icon.attr("data")?0:parseInt($icon.attr("data"));counter++,$icon.attr("data",counter)},playFinished:function(){var counter=void 0===$icon.attr("data")?0:parseInt($icon.attr("data"));counter--,counter<=0&&(counter=0,$this.is(":hover")||($icon.removeClass("sf-play"),$icon_text.text("hover to play"))),$icon.attr("data",counter)}},timerId=$this.attr("data");void 0!==timerId&&($this.removeAttr("data"),clearTimeout(timerId));var replay=function(){$this.attr("data",setTimeout(function(){playNotesString(notes_string,callbacks),replay()},2e3))};return replay(),playNotesString(notes_string,callbacks),!1}),$(document).on("mouseleave","div.play-on-hover .chfret",function(){var $this=$(this),$wrapper=$this.closest(".main_chord_with_play"),$icon=$wrapper.find("i"),$icon_text=$wrapper.find("span");$icon.attr("data",0),$icon.removeClass("sf-play"),$icon_text.text("hover to play");var timerId=$this.attr("data");return void 0!==timerId&&($this.removeAttr("data"),clearTimeout(timerId),soundOff()),!1}))}function audioDetected(supports){}function prepareNotesString(notes){for(var note,result="",string=5;string>=0;string--)notes[string]>0&&(note=parseInt(notes[string])+12,result+=note+" ");return $.trim(result)}function right_column_position(){$(".rt_b").length>0&&show_fixed_panel&&($(window).scrollTop()+$(window).height()>=$(".rt_b").offset().top+$(window).height()-20?($("#fixed_panel.abs").hide().removeClass("abs").show(),$(".comm-post.float.embedded").css("top","59px")):($("#fixed_panel:not(abs)").hide().addClass("abs").show(),$("#fixed_panel.abs").length&&$(".comm-post.float.embedded").css("top",$("#fixed_panel").offset().top-$(window).scrollTop()+40+"px")))}function playNotesString(notesString,options){var notes=notesString.split(" ");isAudioSupported&&playChord(notes,options)}function soundOff(){isAudioSupported&&stopChord()}function voting(obj,show_messages){var rate=obj.attr("data-rate");rate>2?send_vote(obj,show_messages,0,""):(rate_btn=obj,trackMetricaEvent("TPW_LOW_RATING_MODAL_OPEN"),0==$("#js-modalRatingExplain").length?$.ajax({url:document.location.protocol+"//www"+ug_serv+"/tab/rating/explain",data:{rating:rate},dataType:"jsonp",success:function(data){$("body").append(data.info),$(".js-low-rating").text(rate),show_modal($("#js-modalRatingExplain"),!0)}}):($(".js-low-rating").text(rate),show_modal($("#js-modalRatingExplain"),!0)))}function show_modal(modal,is_show_backdrop){modal.show(),is_show_backdrop&&$("body").append('<div class="modal-backdrop fade-in"></div>')}function hide_modal(modal){modal.hide(),$(".modal-backdrop").remove()}function send_vote(obj,show_messages,reason_id,comment_text){ga_track_event(["_trackEvent","Tab Page","Rating on "+obj.attr("data"),"Rate"]),already_voted||(already_voted=!0,user_id==tabs_user_id?show_messages&&message_popup("Can`t vote for your own tab",TYPE_ERROR):(increase_votes(1),show_messages&&message_popup("Thanks for your vote!",TYPE_SUCCESS)));var rating=(obj.attr("href"),obj.attr("data-rate")),exp_var=obj.parent().attr("data-exp_var");rating>=4&&window.UGAPP.trigger("AuthorVote:showModal"),$.ajax({url:document.location.protocol+"//www"+ug_serv+"/tab/rating/add",type:"GET",data:{id:tabid,rating:rating,reason:reason_id,comment:comment_text,exp_var:exp_var},xhrFields:{withCredentials:!0},dataType:"json",error:function(){show_messages&&message_popup("Unknown error while voting",TYPE_ERROR)},success:function(data){if("layer"==obj.attr("data")&&hide_modal($("#js-modalRatingLayer")),"ok"==data.result)current_rating_count=data.info.votes||1,current_rating=data.info.votes?data.info.rating:rating,$("div.v_c").html(" x "+current_rating_count),$("div.voting a").removeClass("cur cur__half"),stars_fill(current_rating,!1);else if(show_messages&&data.result==TYPE_ERROR)switch(data.info){case"Unactivated":window.UGAPP.trigger("auth:login");break;case"Banned":window.UGAPP.trigger("auth:blocked");break;default:message_popup(data.info,TYPE_ERROR)}}})}function send_comment(comment_text,is_comment){$.ajax({type:"POST",url:document.location.protocol+"//www"+ug_serv+"/tab/comment/create",data:{cb_comment:"on",parent_id:0,ajax_form:1,rowid:$("#comment_form input[name=rowid]").val(),content:comment_text},xhrFields:{withCredentials:!0}})}function add_tab_to_favourite(){var url=document.location.protocol+"//www"+ug_serv+"/user/favorite/tabListAdd";already_favourite?ga_track_event(["_trackEvent","Tab Page","Favorites","Favorites Add Already"]):(ga_track_event(["_trackEvent","Tab Page","Favorites","Favorites Add"]),message_popup($(".messages-container").data("added-to-favorites"),TYPE_SUCCESS),already_favourite=!0,$.ajax({url:url,dataType:"jsonp",data:{id:tabid},success:function(data,textStatus,jqXHR){"ok"!=data.result&&message_popup(data.info,TYPE_ERROR)}}))}function submit_tab_comment(){$("#comment_form").submit()}function show_tp_hint(){$(".tp_hint").length>0&&parseInt($(".tp_hint").css("bottom"))<0&&$(".tp_hint").animate({bottom:10},600)}function comment_vote(comment_id,voteval){var $comment=$("#c_"+comment_id);user_id?($comment.find(".commvalue").addClass("voted"),$comment.find(".cvote a").off("click"),$.ajax({type:"GET",url:document.location.protocol+"//www"+ug_serv+"/tab/comment/vote",data:{content:voteval,rowid:comment_id,jsonp:1},dataType:"json",xhrFields:{withCredentials:!0},success:function(req){if(void 0!==req.result)if("success"!=req.result)"You are not authorized!"==req.error?window.UGAPP.trigger("auth:login",{callback:function(){comment_vote(comment_id,voteval)}}):$comment.find("._votecomment").css("color","#d93838").html(req.error);else{var voteval_container=$comment.find(".commvalue ins"),oldval=parseInt(voteval_container.text());oldval=oldval||0;var newval=oldval+(voteval>0?1:-1);voteval_container.text(newval>0?"+"+newval:newval||"");var voteval_value=parseInt(voteval_container.text());voteval_container.css("color",voteval_value>0?"#477e00":voteval_value?"#d93838":"#999")}else $comment.find("._votecomment").css("color","#999").html("Request error. Please contact our system administrator")}})):window.UGAPP.trigger("auth:login",{callback:function(){comment_vote(comment_id,voteval)}})}function create_applicature_widget(chord,tuning,options){var html=render_applicature(chord,tuning,options);return html?$(html):$("")}function getCustomApplicature(chord_id){var result=[];for(var i in applicature[custom_applicatures[chord_id].chord])i==parseInt(i)&&(result[i]=applicature[custom_applicatures[chord_id].chord][i]);for(var app=null,i=0;i<result.length;i++)if("id"in(app=result[i])&&app.id==custom_applicatures[chord_id].app){arrayMove(result,i,0);break}return result||(result=applicature[custom_applicatures[chord_id].chord]),result}function render_applicature(chord,tuning,options){options=$.extend({count_class:""},options);var html=null,applicature_item=null;if(chord=Chord.convertChordName(chord),void 0!==Chord.convertChordName(chord)){applicature_item=0==current_transpose&&"chord_id"in options?getCustomApplicature(options.chord_id):applicature[chord];var vars_list=build_variations_list(applicature_item,tuning);html+='<div class="chord-variations-wrapper '+options.count_class+'" data-chord_id="'+(options&&"chord_id"in options?options.chord_id:"")+'">',html+=render_head(chord),html+='<div class="diagwrap">',html+='<div class="main_chord_with_play"><div class="play-on-hover"><b><i></i><span>hover to play</span></b>',html+='<div class="cont_chrd" rel="0">',vars_list.length&&(html+=vars_list[0]),html+="</div>",html+="</div></div>",html+='<div class="varctrl">variations</div>',html+='<div class="chords_versions_handler">',html+=render_variations_list(vars_list),html+=render_variations_controls(vars_list),html+="</div>",html+="</div>",html+="</div>"}return html}function render_head(acc){return'<div class="chord_body chord_body_selector"><div class="diag_head diag_head_selector"><img src="'+document.location.protocol+"//"+js_img_domain+'/_img/1x1.gif" class="ch_hm">'+acc+'<a href="#"></a></div></div>'}function render_variations_list(vars_list){var html='<div class="chords_versions_handler_limiter">';html+='<div class="chords_versions_scroller_moveable" rel="1">';for(var i=0;i<vars_list.length;i++)html+='<div class="cont_chrd" rel="'+i+'">'+vars_list[i]+"</div>";return html+="</div>",html+="</div>"}function build_variations_list(appls,tuning){var list=[],vars_count=0;for(var i in appls)if(appls.hasOwnProperty(i)){var applicature_item=appls[i];if("suggested_fret"==i||"old_ch"==i||"_"==i.substring(0,1))continue;vars_count++;var html="";html+='<div class="chfret">',html+=1==vars_count?'<div class="chfret_clicked_label" style="display: block;"></div>':'<div class="chfret_clicked_label"></div>',html+=render_play_link(applicature_item);for(var capoIndex=0;capoIndex<applicature_item.l.length;capoIndex++)html+=render_capo(applicature_item.l[capoIndex].f-applicature_item.f+(0==applicature_item.f?0:1),applicature_item.l[capoIndex].e);for(var string=0;string<applicature_item.t.length;string++)applicature_item.g[string]>0&&(html+=render_finger(string,applicature_item.t[string]-applicature_item.f+(0==applicature_item.f?0:1),applicature_item.g[string]));html+=render_tuning(tuning),html+=render_strings(find_bass_string(applicature_item),applicature_item),html+="</div>",html+=render_fret(applicature_item),list.push(html)}return list}function render_tuning(tuning){for(var strings=tuning.split(" "),result='<div style="position:absolute; top:-2px; left:5px"><ul class="app_lu">',i=strings.length-1;i>=0;i--){if(5==i&&"e a d g b e"==tuning.toLowerCase())var lt_class="app_ltesm";else{var lt_class="app_lt"+strings[i].toLowerCase().substr(0,1);"#"==strings[i].substr(strings[i].length-1,1)&&(lt_class+="dz")}result+='<li class="'+lt_class+'"></li>'}return result+="</ul></div>"}function render_capo(fret,lastString){return'<div class="barre finger-fret-'+fret+" capo-string-"+lastString+'"></div>'}function render_finger(string,fret,finger){return fret<0?"":'<div class="fingbg finger-string-'+string+" finger-fret-"+fret+'"><div class="f-'+finger+'"></div></div>'}function render_fret(applicature_item){var fret_tmp="&nbsp;";return 0!=applicature_item.f&&(fret_tmp=applicature_item.f+" fr"),'<div class="fs-10 fretnum">'+fret_tmp+"</div>"}function render_play_link(applicature_item){var html="";return html+='<a class="p_apl play_applicature_button" rel="'+prepareNotesString(applicature_item.n)+'" href="#"></a>'}function render_strings(bass_string,applicature_item){for(var html='<div class="strings">',string=0;string<applicature_item.t.length;string++)html+=render_string(string,bass_string,applicature_item.t[string]);return html+="</div>"}function render_string(string,bass_string,fret){var string_class="f-str";return-1==fret?string_class="x-str":0==fret&&(string_class="o-str"),'<div class="'+string_class+'" rel="string'+string+" bass"+bass_string+'"></div>'}function render_variations_controls(vars_list){var html='<div class="chords_versions_controls">';return html+='<div class="chords_versions_controls_left"><b></b> Prev</div>',html+='<div class="chords_versions_controls_info_text">',html+="1 of "+Math.ceil(vars_list.length/2),html+="</div>",vars_list.length>2&&(html+='<div class="chords_versions_controls_right">Next <b></b></div>'),html+="</div>"}function find_bass_string(app){for(var bass_string=0,bass=127,i=0;i<app.n.length;i++)app.n[i]%12==app.x&&app.n[i]<=bass&&(bass=app.n[i],bass_string=i);return bass_string}function cancel_comment_edit(){$("#edit_comment_form").parents("div.comment_content:first").find("p").show(),$("#edit_comment_form").remove()}function isLocalStorageAvailable(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function isJsonAvailable(){try{if(JSON&&"function"==typeof JSON.parse)return!0}catch(e){return!1}}function addTabToHistory(history){for(var current_tab_history={id:tabid,artist:ucwords(name_art),name:ucwords(tab_info.name),url:window.location.pathname,v:tab_info.version,type:tab_info.type},already_in_history=!1,i=0;i<history.length;i++)history[i].id==current_tab_history.id&&(already_in_history=!0);if(0==already_in_history){var tabs_history=getTabsHistory().splice(0,4);tabs_history.unshift(current_tab_history),$.cookie("tabs_history",JSON.stringify(tabs_history),{expires:365,path:"/",domain:ug_serv})}return history}function addTabToLocalStorageHistory(){var time=Math.floor((new Date).getTime()/1e3),tabInfo={id:tabid,artist:ucwords(name_art),name:ucwords(tab_info.name),url:window.location.pathname,v:tab_info.version,type:tab_info.type,time:time},history=[];try{var history=JSON.parse(localStorage.getItem("_ug_tabsHistory"))}catch(e){}try{var needStorage=!1;if(!history){needStorage=!0;var cookieTabsHistory=$.cookie("tabs_history",[]);null!=cookieTabsHistory&&cookieTabsHistory.length>2&&(cookieTabsHistory=JSON.parse(cookieTabsHistory)),null==cookieTabsHistory&&(cookieTabsHistory=[]),history=cookieTabsHistory}for(var alreadyInHistory=!1,i=0;i<history.length;i++)if(history[i].id==tabInfo.id){alreadyInHistory=!0,needStorage=!0,history[i].time=time;break}!needStorage&&alreadyInHistory||(alreadyInHistory||(history.sort(function(a,b){return a.time=a.time?a.time:0,b.time=b.time?b.time:0,a.time>b.time?-1:a.time<b.time?1:void 0}),history=history.splice(0,50),history.unshift(tabInfo)),localStorage.setItem("_ug_tabsHistory",JSON.stringify(history)))}catch(e){}}function ucwords(str){return str.replace(/^(.)|\s(.)/g,function($1){return $1.toUpperCase()})}function ga_track_event(ga_track_params){void 0!==ga_track_params&&function(ga_track_params){for(var divide_events=["Tab Page:::Autoscroll:::Autoscroll Start","Tab Page:::Autoscroll:::Autoscroll Show","Tab Page:::Autoscroll:::Autoscroll Hide","Tab Page:::Chords:::Highlight chords Play","Tab Page:::Chords:::Highlight chords Variations Show","Tab Page:::Chords:::Display chords Play","Tab Page:::Chords:::Highlight chords Variations Hide","Tab Page:::Chords:::Display Chords Variations Show","Tab Page:::Chords:::Display Chords Variations Hide","Tab Page:::Comments:::Comments Top Show","Tab Page:::Comments:::Comments Bottom Show","Tab Page:::Ctrl+C:::Ctrl+C Click","Tab Page:::Display chords:::Display chords On","Tab Page:::Display chords:::Display chords Off","Tab Page:::Favorites:::Favorites Add","Tab Page:::Font Size:::Font Size Plus","Tab Page:::Font Size:::Font Size Minus","Tab Page:::Highlight Chords:::Highlight Chords Off","Tab Page:::Highlight Chords:::Highlight Chords On","Tab Page:::Jango.com link:::Jango.com link","Tab Page:::Print:::Show","Tab Page:::Print link:::Print link","Tab Page:::Tab Versions:::Tab Versions Show","Tab Page:::Transpose:::Transpose Up","Tab Page:::Transpose:::Transpose Down"],event=ga_track_params[1]+":::"+ga_track_params[2]+":::"+ga_track_params[3],i=0;i<divide_events.length;i++)if(event==divide_events[i])return!0;return!1}(ga_track_params)?function(denominator){return 0==Math.floor(Math.random()*denominator)}(10)&&(ga_track_params=ga_track_params.slice(1),ga_track_params.unshift("event"),ga_track_params.unshift("send"),ga.apply(window,ga_track_params)):(ga_track_params=ga_track_params.slice(1),ga_track_params.unshift("event"),ga_track_params.unshift("send"),ga.apply(window,ga_track_params))}
function loadFacebookSdk(callback){!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],loaded=!1;d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_GB/all.js#xfbml=1&appId=539490962762175",fjs.parentNode.insertBefore(js,fjs),callback&&(js.onreadystatechange=js.onload=function(){loaded||(callback(),loaded=!0)}))}(document,"script","facebook-jssdk")}function trackMetricaEvent(event_name){if("complete"==document.readyState)try{yaCounter18746557.reachGoal(event_name)}catch(e){}else window.addEventListener("load",function(){trackMetricaEvent(event_name)})}function initHelpfulVoting(selector,storage_id,url){var $question=$(selector),modalStrummingLogic=function(get_data,ug_serv,url){user_id?(show_modal($("#js-modalVoteNo"),!0),$(document).on("click",".js-btn-vote-no",function(){return""==$(".js-vote-no-input").val()?$(".js-vote-no-other-error").show().addClass("has-error"):($(".js-vote-no-other-error").hide(),get_data.comment=$(".js-vote-no-input").val(),$.ajax({url:document.location.protocol+"//www"+ug_serv+url,xhrFields:{withCredentials:!0},data:get_data,success:function(res){"ok"==res.result&&hide_modal($("#js-modalVoteNo"))}})),!1})):(event.preventDefault(),window.UGAPP.trigger("auth:login",{}))},sendData=function(e){e.preventDefault();var id=$question.data("id"),vote=$(this).data("vote"),get_data={tab_id:id,is_helpful:vote};-1==vote&&modalStrummingLogic(get_data,ug_serv,url),$question.html("Thanks for voting!"),$.ajax({url:document.location.protocol+"//www"+ug_serv+url,xhrFields:{withCredentials:!0},data:get_data});try{var ids=JSON.parse(localStorage.getItem(storage_id))||{};ids[tabid]=!0,localStorage.setItem(storage_id,JSON.stringify(ids))}catch(e){}};$question.length&&!function(){return JSON.parse(localStorage.getItem(storage_id))||{}}()[tabid]&&$question.removeClass("hide").find(".js-vote-btn").on("click",sendData)}function toCreateCorrection(){window.location=document.querySelector(".js-correct-tab").href}var lock_scroller=!1,all_applicatures_loaded=!1,TYPE_ERROR="error",TYPE_SUCCESS="success",already_voted=!1,already_favourite=!1,already_comment_loaded=!1,rate_btn=!1,ver_w=114,old_comments_link="first",chk_view_coms_ready=0,votes_arr=new Array;votes_arr[0]="please rate",votes_arr[1]="poor",votes_arr[2]="not so good",votes_arr[3]="worth learning",votes_arr[4]="accurate",votes_arr[5]="excellent!";var current_fontsize_counter=0,default_fontsize=12,current_fontsize=12,FONTSIZE_MODIFIER_MAX=6,FONTSIZE_MODIFIER_MIN=-2,scroll_value_duration=100,is_transpose_locked=!1,first_link="",ui_dragable=1e3,SF_PATH="//img"+ug_serv+"/js/soundfont",isAudioSupported=!1,q=0,accords=new Array;accords[1]="C",accords[2]="C#",accords[3]="D",accords[4]="D#",accords[5]="E",accords[6]="F",accords[7]="F#",accords[8]="G",accords[9]="G#",accords[10]="A",accords[11]="A#",accords[12]="B";var cnt=accords.length-1,applicature_animation=!1,loc=document.location.toString(),uniq_cnt=0,vote_txt=$(".cnt_rate").html(),current_transpose=0,saved_transposed_states={},show_bad_comments=!1,applicature="applicature"in window?applicature:{},custom_applicatures="custom_applicatures"in window?custom_applicatures:{},ChordsMap=(new function(){var original_map={},map={},new_map={},self=this;this.init=function(){for(var chord_name in applicature)original_map[chord_name]=chord_name,map[chord_name]=chord_name;return self},this.postModulate=function(chords){if(0==current_transpose)chords=$.extend(!0,{},map),map=$.extend(!0,{},original_map);else{startTranspose();for(var chord_name in chords)chord_name&&changeName(chord_name,chords[chord_name]);finishTranspose()}return chords};var startTranspose=function(){new_map={}},finishTranspose=function(){map=$.extend(!0,{},new_map),new_map={}},changeName=function(old_name,new_name){new_map[new_name]=map[old_name]}}).init(),TabScroller=function(){$("#r_a").is(":visible")&&$("#whole_scroll").css("top","250px"),this.of_top=$("#whole_scroll").offset().top,this.scrolling_speed=0,this.height_gradient=0,this.to="",this.move_area_coords,this.save_scroll_position=!1,this.scroller_margin=15,this.memorized_position=parseInt($("#whole_scroll").css("top")),this.$container=$("#scroll_holder"),$("#speed div").click(function(e){tab_scroller.setHeight($(this).index()+1,!0),tab_scroller.changeSpeed(100*($(this).index()+1))}),$("#speed div").mouseover(function(e){$("#speed div").removeClass("hover"),$(this).addClass("hover"),$(this).prevAll().addClass("hover")}),$("#speed").mouseleave(function(e){tab_scroller.setHeight(tab_scroller.height_gradient)}),$("#dec_speed").click(function(){tab_scroller.decSpeed()}),$("#inc_speed").click(function(){tab_scroller.incSpeed()}),$("#whole_scroll").draggable({stop:function(){$("#whole_scroll").hasClass("fixed")&&($("#whole_scroll").css({top:$("#whole_scroll").offset().top-$(".t_br").offset().top,left:$("#whole_scroll").offset().left-$(".t_br").offset().left}),$("#whole_scroll").removeClass("fixed")),tab_scroller.save_scroll_position=!1,tab_scroller.memorized_position=parseInt($("#whole_scroll").css("top"))}}),$(document).keydown(function(event){if("undefined"==typeof unknown_platform&&!lock_scroller)switch(event.keyCode){case 27:tab_scroller.setHeight(0,!0),tab_scroller.changeSpeed(0),$("#whole_scroll").animate({opacity:"1"},1);break;case 43:case 107:500!=tab_scroller.scrolling_speed&&tab_scroller.incSpeed();break;case 45:case 109:tab_scroller.decSpeed()}}),$(window).scroll(function(){if($("#whole_scroll:visible").get(0)&&!$("#whole_scroll").hasClass("ui-draggable-dragging")){window_scroll_top=$(window).scrollTop();var scroll_offset_top=$("#whole_scroll").offset().top,wrapper_top=$(".t_b").offset().top,out_of_top=window_scroll_top>=scroll_offset_top-tab_scroller.scroller_margin;out_of_top=out_of_top&&tab_scroller.memorized_position<=scroll_offset_top-wrapper_top;var out_of_bottom=window_scroll_top+$(window).height()-tab_scroller.scroller_margin<=scroll_offset_top+$("#whole_scroll").height();if(out_of_bottom=out_of_bottom&&scroll_offset_top>$("#scroll_holder").offset().top+tab_scroller.scroller_margin,out_of_bottom=out_of_bottom&&tab_scroller.memorized_position>=scroll_offset_top-wrapper_top,out_of_top||out_of_bottom){if(!$("#whole_scroll").hasClass("fixed")){tab_scroller.memorized_position=parseInt($("#whole_scroll").css("top")),tab_scroller.save_scroll_position=!0;var left=$("#whole_scroll").offset().left;if(out_of_bottom)var top=$(window).height()-$("#whole_scroll").height()-tab_scroller.scroller_margin;else var top=tab_scroller.scroller_margin;$("#whole_scroll").addClass("fixed").css({left:left,top:top})}}else if(tab_scroller.save_scroll_position){if(tab_scroller.memorized_position>window_scroll_top+$(window).height()-$("#whole_scroll").height()-tab_scroller.scroller_margin)var top=$("#scroll_holder").offset().top-window_scroll_top+tab_scroller.scroller_margin,left=$("#whole_scroll").position().left;else{var top=tab_scroller.memorized_position,left=$("#whole_scroll").position().left-$(".t_br").offset().left;$("#whole_scroll").removeClass("fixed"),tab_scroller.save_scroll_position=!1}$("#whole_scroll").css({top:top,left:left})}}})};TabScroller.prototype.getContainerBottom=function(){return this.$container.offset().top+this.$container.height()},TabScroller.prototype.needScrollToTop=function(){return window.scrollY+window.innerHeight>this.getContainerBottom()},TabScroller.prototype.doScroll=function(){if(!this.scrolling_speed||this.needScrollToTop())return!1;$.browser.opera||$("body:not(:animated)").animate({scrollTop:"+=1"},1,"linear"),$("html").animate({scrollTop:"+=1"},1,"linear"),timeout_interval=275-this.scrolling_speed/2,this.to=setTimeout("tab_scroller.doScroll()",timeout_interval),$(".b_a").addClass("b_ac"),$("#whole_scroll").show().addClass("ui-draggable").animate({opacity:"0.6"},1)},TabScroller.prototype.changeSpeed=function(speed){speed<=0&&(speed=0,$("#whole_scroll").animate({opacity:"1"},1),clearTimeout(this.to),$(".player_fixed").length>0&&($(".player_fixed").hasClass("b-player-panel")?$(".player_fixed").addClass("bounceInUp").css("bottom",0):$(".player_fixed").animate({bottom:"0px"}),$(".page-wrap").addClass("tp-player-wrap"))),0==this.scrolling_speed&&speed>0&&(ga_track_event(["_trackEvent","Tab Page","Autoscroll","Autoscroll Start"]),$(".player_fixed").length>0&&($(".player_fixed").animate({bottom:"-70px"}),$(".page-wrap").removeClass("tp-player-wrap"))),speed>500&&(speed=500),this.scrolling_speed=speed,this.scrolling_speed>0&&$(window).scrollTop()>this.of_top?($("#whole_scroll").animate(1e3),clearTimeout(tab_scroller.to),tab_scroller.doScroll(),this.scrolling_speed>0&&$("#whole_scroll").animate({opacity:"0.6"},1)):this.scrolling_speed?(clearTimeout(this.to),this.doScroll(),$("#whole_scroll").animate({opacity:"0.6"},1)):clearTimeout(this.to)},TabScroller.prototype.incSpeed=function(){this.changeSpeed(this.scrolling_speed+100),this.height_gradient++,this.setHeight(this.height_gradient,!0)},TabScroller.prototype.decSpeed=function(){this.changeSpeed(this.scrolling_speed-100),this.height_gradient--,this.setHeight(this.height_gradient,!0)},TabScroller.prototype.setHeight=function(height,set_){height<0&&(height=0),height>5&&(height=5),$("#speed div").removeClass("hover"),$("#speed div:lt("+height+")").addClass("hover"),set_&&(this.height_gradient=height)};var show_fixed_panel=!1;navigator.userAgent.match(/(iPhone|iPod|iPad|Android)/i)||($("#fixed_panel").show(),show_fixed_panel=!0),$(document).ready(function(){function countWords(s){return s=s.replace(/(^\s*)|(\s*$)/gi,""),s=s.replace(/[ ]{2,}/gi," "),s=s.replace(/\n /,"\n"),s.split(" ").length}function add_shadow_on_click(_this){_this.addClass("active"),setTimeout(function(){_this.removeClass("active")},100)}var tpw_side_banner={canShow:!1,variationInitialized:!1,$el:$(".js-tpw-player-side"),show:function(){this.$el.removeClass("hide")},hide:function(){this.$el.addClass("hide")},getVariation:function(){var v=$.cookie("_ug_exp48"),vars=["A48","B48","C48","D48","E48","F48"];return-1==vars.indexOf(v)&&(v=vars[function(min,max){var argc=arguments.length;if(0===argc)min=0,max=2147483647;else{if(1===argc)throw new Error("Warning: mt_rand() expects exactly 2 parameters, 1 given");min=parseInt(min,10),max=parseInt(max,10)}return Math.floor(Math.random()*(max-min+1))+min}(0,5)],$.cookie("_ug_exp48",v,{expires:10,path:"/",domain:window.ug_serv})),v},init:function(){this.canShow=!0}};if(tpw_side_banner.$el.length&&(tpw_side_banner.$close=$(".js-tpw-player-side .js-close"),$(".js-player-panel").length||tpw_side_banner.$el.addClass("has_singe_banner"),tpw_side_banner.$el.on("click",function(){var number=$(this).attr("data-number"),params=["_trackEvent","Tab Page","Tab Pro Buttons"];ga_track_event(params.concat("Tab Pro Buttons Click")),ga_track_event(params.concat("Tab Pro Buttons Click "+number))}),tpw_side_banner.$close.on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),tpw_side_banner.hide()}),tpw_side_banner.init()),show_tp_hint(),$(".js-how-to-read-tabs").on("click",function(){ga("send","event","Survey","Faq Article","Transition by Article")}),$(".comment_box_h_main").length&&$(window).scroll(function(){var comment_header_top=$(".comment_box_h_main").offset().top;$(window).scrollTop()+$(window).height()>=comment_header_top+70?$(".player_fixed, .tp_hint").slideUp(400,function(){$(this).addClass("hide")}):$(".player_fixed, .tp_hint").removeClass("hide").slideDown()}),"undefined"!=typeof instr)switch(instr){case"ukulele":$("body").addClass("ukulele");break;case"guitar":default:$("body").addClass("guitar")}isAudioSupported||$("body").addClass("audio-not-supported"),$(".versions_column__interactive a").on("click",function(){ga("send","event","Links ","TP Link","TP Version Link Click");var link=$(this).attr("href");return setTimeout(function(){window.location=link},350),!1}),$(document).keydown(function(e){e.ctrlKey&&67==e.keyCode&&ga_track_event(["_trackEvent","Tab Page","Ctrl+C","Ctrl+C Click"])}),initFontsize(),"ontouchstart"in window&&$(".t_version").on("touchend",function(){return $(this).trigger("mouseenter"),!1}),$(".t_version").mouseenter(function(){ga_track_event(["_trackEvent","Tab Page","Tab Versions","Tab Versions Show"]),$(this).parent().children(".t_versions").show()}),$(".t_versions").mouseleave(function(){$(this).hide()}),"Chords"!=tab_info.type&&"Ukulele Chords"!=tab_info.type||(Chord.init(),bind_hover(),create_chords_list()),$(".autoscroll_controller").mouseenter(function(e){return e.target==this&&(ui_dragable++,$(this).css("z-index",ui_dragable)),!1}),$(".autoscroll_controller").mouseleave(function(){return $(this).css("z-index",ui_dragable-1),!1}),first_link=$("#print_link").attr("href"),$(".show_comments").click(function(){return $(this).hasClass("t_comments_union")?(ga_button="Top",need_scroll=!0):(ga_button="Bottom",need_scroll=!1,$(this).parent().addClass("loading")),$(this).hasClass("active")?(ga_track_event(["_trackEvent","Tab Page","Comments","Comments "+ga_button+" Hide"]),$(this).removeClass("active"),$("#comments").fadeOut(),$(".comm-post").removeClass("float").addClass("embedded"),$(".commentswr").append($(".comm-post"))):(ga_track_event(["_trackEvent","Tab Page","Comments","Comments "+ga_button+" Show"]),viewComments(0,need_scroll,!1)),!1}),$(document).on("click","a.commreply",function(){if("edit"!=$(this).text()||$(this).parents(".comment:first").hasClass("updated")){var $form=$("#comment_form").parent(),$prev_class=$(this).parent().parent().parent().attr("class");$prev_class=$prev_class.substring(7,12),$form.find("#form_parent_id").val($(this).attr("rel")),$form.removeClass(),$form.addClass("comm-post "+$prev_class+" embedded"),$("#c_"+$(this).attr("rel")).append($form),$("#comm_txt").focus()}else{cancel_comment_edit();var edit_text_source=$(this).parents("div.comment:first").find(".comment_content p").text(),comment_id=$(this).parents(".comment:first").attr("id");comment_id=comment_id.split("_")[1];var $comment_content=$(this).parents("div.comment:first").find(".comment_content");$comment_content.find("p").hide(),$comment_content.append('<form id="edit_comment_form" action="'+document.location.protocol+"//www"+ug_serv+'/tab/comment/edit"><textarea name="content" id="edit_comment_txt" class="edit_text">'+edit_text_source+'</textarea><input type="hidden" name="id" value="'+comment_id+'"><input type="hidden" name="act" value="edit"><br><input type="submit" value="Save"><input id="cancel_edit" type="button" value="Cancel"></form>')}return!1}),$(document).on("submit","#edit_comment_form",function(){return $.ajax({url:$(this).attr("action"),data:$(this).serialize(),dataType:"jsonp",success:function(data,textStatus,jqXHR){}}),window.location.reload(!1),!1}),$(document).on("click","#cancel_edit",function(){return cancel_comment_edit(),!1}),$(document).on("click","#close_reply",function(){return $("#form_parent_id").val("0"),$(this).parents(".comm-post").hasClass("float")?($(this).parents(".comm-post").remove(),$("#fixed_add_comment").show()):$("#comments").append($(".comm-post")),$("#comment_form").parent().removeClass("float embedded"),!1}),$(window).scroll(function(){right_column_position()}),$(document).on("click",".rate_btn_wrp",function(){return $(this).parent().toggleClass("selected"),!1}),$(document).on("click",".rate_list_drop a",function(){return $(this).parent().parent().removeClass("selected").find(".rate_btn_wrp").html($(this).html()),user_id?voting($(this),!1):window.UGAPP.trigger("auth:login",{callback:function(){voting($(this),!1)}}),!1}),$(document).on("click",function(){$(".rate_list_drop").is(":visible")&&$(".rate_list_btn").removeClass("selected")}),$("div.voting a").on("click",function(){return user_id?voting($(this),!0):window.UGAPP.trigger("auth:login",{callback:function(){voting($(this),!0)}}),!1}),$(document).on("click",".js-close-modal",function(){return hide_modal($(".modal")),!1}),$(document).on("change","#js-reason-check",function(){$(this).is(":checked")?$("#js-rating-reason-other").show():$("#js-rating-reason-other").hide()}),$(document).on("click",".js-rating-reason",function(){0==$(this).attr("data-required-comment")?(hide_modal($("#js-modalRatingExplain")),trackMetricaEvent("TPW_DONT_LIKE_TAB"),message_popup("Thanks for your vote!",TYPE_SUCCESS),send_comment("didn't like this contribution",!0)):(trackMetricaEvent("TPW_REASON_MODAL_OPEN"),$(".js-rating-reason-comment").show(),$(".js-rating-reason-wrapper").hide(),$(".js-btn-rating-explain").attr("data-reason",$(this).attr("data-reason")))}),$(document).on("click",".js-btn-rating-explain",function(){if(countWords($(".js-rating-reason-input").val())<20)$(".js-rating-reason-other-error").show().addClass("has-error");else{trackMetricaEvent("TPW_RATE_"+{1:"FORMAT",2:"ACCUARCY",3:"INCOMPLETE",4:"WRONG"}[$(this).attr("data-reason")]+"_TAB"),send_vote(rate_btn,!0,$(this).attr("data-reason"),$(".js-rating-reason-input").val()),hide_modal($("#js-modalRatingExplain"))}return!1}),$(".js-fav-add").on("click",function(){return user_id?(window.UGAPP.trigger("AuthorVote:showModal"),add_tab_to_favourite()):window.UGAPP.trigger("auth:login",{callback:add_tab_to_favourite}),!1}),$(".voting a").on("mouseover",function(){stars_fill($(this).index()+1,!0)}),$("#arr_scroll").on("click",function(){hide_scroll()}),$(".voting").on("mouseleave",function(){stars_fill(current_rating,!1)}),tab_scroller=new TabScroller,$(".b_a").click(function(){if(lock_scroller)return!1;var $scroller=$("#whole_scroll");return $scroller.is(":hidden")?(ga_track_event(["_trackEvent","Tab Page","Autoscroll","Autoscroll Show"]),$scroller.fadeIn(100).draggable({containment:"parent"},{handle:".autoscroll_controller_header"}),$(window).trigger("scroll"),$(".b_a").addClass("b_ac")):(ga_track_event(["_trackEvent","Tab Page","Autoscroll","Autoscroll Hide"]),$scroller.fadeOut(100),$(".b_a").removeClass("b_ac")),$(".b-eupp").is(":visible")&&$scroller.css("left","10px").css("top","45px"),!1}),$(".autoscroll_controller_exit").click(function(){return ga_track_event(["_trackEvent","Tab Page","Autoscroll","Autoscroll Hide"]),hide_scroller_widget(),!1}),$("#c_a").click(function(){return $("#r_a").hide(0),$(window).trigger("scroll"),250!=parseInt($("#whole_scroll").css("top"))||$("#whole_scroll:visible").get(0)||$("#whole_scroll").css("top","-=205"),!1}),$(document).on("click","div.chords_versions_scroller_moveable .chfret",function(){var $this=$(this),$appl_wrapper=$this.closest(".cont_chrd"),$main_appl_wrapper=$this.closest(".chord-variations-wrapper").find(".main_chord_with_play .cont_chrd");if($appl_wrapper.attr("rel")!=$main_appl_wrapper.attr("rel")){var $vars_wrapper=$this.closest(".chords_versions_scroller_moveable");$main_appl_wrapper.html($appl_wrapper.html()),$main_appl_wrapper.attr("rel",$appl_wrapper.attr("rel")),$vars_wrapper.find(".chfret_clicked_label").fadeOut(100),$appl_wrapper.find(".chfret_clicked_label").fadeIn(100)}return!1}),$("#disp_ch_diagrams").on("click",function(){function showStickyChords(){$chords_list.removeClass("list_narrow").addClass("list_wide").fadeIn(100);try{yaCounter18746557.reachGoal("SMALL_CHORDS_SHOWN")}catch(e){}}scrollerSwitch();var $this=$(this);ga_track_event(["_trackEvent","Tab Page","Display chords","Display chords "+($(this).hasClass("on")?"Off":"On")]),$this.hasClass("on")?$this.removeClass("on"):$this.removeClass().addClass("on");var $chords_list=$("#chords_list");$chords_list.is(":hidden")?($("#r_a").is(":visible")?($chords_list.removeClass("list_wide"),$chords_list.addClass("list_narrow")):($chords_list.removeClass("list_narrow"),$chords_list.addClass("list_wide")),$("#r_a").length?$("#r_a").fadeOut(100,function(){showStickyChords()}):showStickyChords()):($chords_list.fadeOut(100),$("#r_a").fadeIn(100),$(".sticky--consolidate").removeClass("on"),Stickyfill.kill())}),$(document).on("click",".sticky--close",function(){Stickyfill.kill(),$(this).removeClass("sticky--close__show"),$("#r_a").fadeIn(100),$("#disp_ch_diagrams").removeClass("on"),$("#chords_list").css("border","none").fadeOut(100)}),$(document).on("click","div.varctrl",function(){return onVariationsClick({button:$(this)}),!1}),$(document).on("click","div.chords_versions_controls_left, div.chords_versions_controls_right",function(){if(applicature_animation)return!1;var $this=$(this),$left=$(this).parent().children(".chords_versions_controls_left"),$right=$(this).parent().children(".chords_versions_controls_right"),$moveable=$this.closest(".diagwrap").find(".chords_versions_scroller_moveable"),page=parseInt($moveable.attr("rel")),direction=$this.hasClass("chords_versions_controls_left")?-1:1,appl_count=$moveable.children(".cont_chrd").length,max_page=Math.ceil(appl_count/2);if(1==page&&direction<0||page==max_page&&direction>0)return!1;var page_new=page+direction;$moveable.attr("rel",page_new);var animate_step=2*ver_w*-direction;return page_new==max_page&&$right.fadeOut(100),1==page_new&&$left.fadeOut(100),page_new>1&&1==page&&$left.fadeIn(100),page==max_page&&page_new==max_page-1&&$right.fadeIn(100),$moveable.animate({marginLeft:animate_step+parseInt($moveable.css("margin-left"))+"px"},{start:function(){applicature_animation=!0},complete:function(){applicature_animation=!1}},500),$this.parent().children(".chords_versions_controls_info_text").text(page_new+" of "+max_page),!1}),"undefined"==typeof unknown_platform&&($("a.m_b").click(function(){return add_shadow_on_click($(this)),onFontsizeClick(-1),!1}),$("a.p_b").click(function(){return add_shadow_on_click($(this)),onFontsizeClick(1),!1}),$("#fontsize_reset_val").click(function(){return onFontsizeClick(-current_fontsize_counter),!1}),$(".d_b").click(function(){return ga_track_event(["_trackEvent","Tab Page","Transpose","Transpose Down"]),add_shadow_on_click($(this)),onTransposeClick(-1),!1}),$(".u_b").click(function(){return ga_track_event(["_trackEvent","Tab Page","Transpose","Transpose Up"]),add_shadow_on_click($(this)),onTransposeClick(1),!1}),$("#transpose_reset_val").click(function(){return onTransposeClick(-current_transpose),!1})),$(document).on("click",".ui-draggable, .ui_not-draggable",function(e){ui_dragable!=$(this).css("z-index")&&(ui_dragable++,$(this).css("z-index",ui_dragable))}),"undefined"!=typeof transpose_to&&transpose_to>0&&onTransposeClick(transpose_to),get_transpose_state_from_local_storage(),show_comments(),function(){var is_already_printed=!1,beforePrint=function(){is_already_printed||(is_already_printed=!0,ga_track_event(["_trackEvent","Tab Page","Print","Show"]))};if(window.matchMedia){window.matchMedia("print").addListener(function(mql){mql.matches&&beforePrint()})}window.onbeforeprint=beforePrint}(),addTabToHistory(getTabsHistory()),addTabToLocalStorageHistory(),$(".d_l_recent-more").click(function(){$(".d_l_more-items").slideDown(),$(this).remove()});var tabTip={$tip:$(".js-tab-tip"),$toggle:function(){return this.$tip.find(".js-toggle")},$message:function(){return this.$tip.find(".js-tip-message")},$link:function(){return this.$tip.find("a")},LOCAL_KEY:"tab_tip_hidden",isVisible:!1,canShow:!0,hide:function(){this.$toggle().text(this.$toggle().data("show-text")),this.$message().addClass("hide"),this.canShow=!1},show:function(){this.$toggle().text(this.$toggle().data("hide-text")),this.$message().removeClass("hide"),this.canShow=!0},onScroll:function(){var scrollTop=$(window).scrollTop(),windowHeight=$(window).height(),messageTop=this.$message().offset().top+100,messageHeight=this.$message().height();!this.isVisible&&messageTop+messageHeight<windowHeight+scrollTop&&(this.isVisible=!0)},addEventListeners:function(){var self=this;this.$toggle().on("click",function(){self.canShow?self.hide():self.show()}),this.$link().on("click",this.onClickLink.bind(this)),$(window).on("scroll",this.onScroll.bind(this))},init:function(){this.addEventListeners()}};tabTip.$tip.length&&tabTip.init();var $tpw_tools=$(".js-tpw-tools"),$tpw_tools_sep=$(".js-tpw-tools-separator");if($tpw_tools.length){var tpw_tools_top=$tpw_tools_sep.offset().top,tpw_tools_height=$tpw_tools.height();$(document).on("reloadscroll",function(){tpw_tools_top=$tpw_tools_sep.offset().top}),$tpw_tools.find(".js-link").on("click",function(){ga_track_event(["_trackEvent","Tab Page","Tab Pro Buttons","Tab Pro Tools Click"])}),$(window).on("scroll",function(){tpw_tools_top=$tpw_tools_sep.offset().top;var comment_header_top=$(".comment_box_h_main").offset()&&$(".comment_box_h_main").offset().top;if(tpw_side_banner.$el.length){var tpw_side_banner_height=tpw_side_banner.$el.height(),t=comment_header_top-$(window).scrollTop();$(window).scrollTop()+$(window).height()<comment_header_top?(tpw_side_banner.$el.show(0),tpw_side_banner.$el.css({top:"auto",bottom:"20px"})):tpw_side_banner_height+40<=t?(tpw_side_banner.$el.show(0),tpw_side_banner.$el.css({top:t-tpw_side_banner_height-20+"px",bottom:"auto"})):tpw_side_banner.$el.hide(0)}$tpw_tools.length&&($(window).scrollTop()+8>tpw_tools_top&&$(window).scrollTop()-16+tpw_tools_height<comment_header_top?$tpw_tools.addClass("fixed"):$tpw_tools.removeClass("fixed"))}),$(window).trigger("scroll")}if(function(){var $officialVersionBanner=$(".js-official-version-banner");if(0!=$officialVersionBanner.length&&!$.cookie("_ug_Official")){var iconOfficialVersionOffset=$(".js-icon-official-version").offset();$officialVersionBanner.removeClass("hide");var bannerOffset=$officialVersionBanner.offset();$(".js-official-version-banner-arrow").css({left:iconOfficialVersionOffset.left-bannerOffset.left+1+"px"}),$(".js-official-version-banner-close").on("click",function(){$officialVersionBanner.remove(),$.cookie("_ug_Official",1,{expires:60,path:"/",domain:ug_serv})})}}(),function(){var $chordProBanner=$(".js-chord-pro-banner");if(0!=$chordProBanner.length&&!$.cookie("_ug_ChordPro")){var iconChordProOffset=$(".js-icon-chord-pro").offset();$chordProBanner.removeClass("hide");var bannerOffset=$chordProBanner.offset();$(".js-chord-pro-banner-arrow").css({left:iconChordProOffset.left-bannerOffset.left+1+"px"}),$(".js-chord-pro-banner-close").on("click",function(){$chordProBanner.remove(),$.cookie("_ug_ChordPro",1,{expires:60,path:"/",domain:ug_serv})})}}(),function(){var $officialVersionBanner=$(".js-official-version-inside-banner");0!=$officialVersionBanner.length&&$(".js-official-version-inside-banner--close").on("click",function(){return $officialVersionBanner.addClass("b-tab--inside-banner__no-description"),$.cookie("_ug_Official",1,{expires:60,path:"/",domain:ug_serv}),!1})}(),function(){if(0!=$(".js-tonebridge-btn").length){trackMetricaEvent("TB_BTN_SHOW"),$(".js-tonebridge-btn").on("click",function(e){trackMetricaEvent("TB_BTN_CLICK")}),$(".js-tonebridge-tooltip-content .js-tonebridge-tooltip-link").on("click",function(e){trackMetricaEvent("TB_TOOLTIP_LINK_CLICK")});var $tonebridgeButtonTooltip=$(".js-tonebridge-tooltip-content");$tonebridgeButtonTooltip.length>0&&(trackMetricaEvent("TB_TOOLTIP_SHOW"),$(".js-tonebridge-tooltip-close").on("click",function(){$.cookie("_ug_tbTooltipClosed",1,{expires:60,path:"/",domain:ug_serv}),$tonebridgeButtonTooltip.remove(),trackMetricaEvent("TB_TOOLTIP_CLOSE")}))}}(),function(){function loadAdOnScroll(){if($(window).scrollTop()+$(window).height()>ADV_LONG_PAGE_TOP-400){$(window).off("scroll",loadAdOnScroll),$advLongPageContainer.removeClass("is_hidden");try{initScrollAd()}catch(err){}}}function setContainerTopIndent(){$advLongPageContainer.css("margin-top",ADV_LONG_PAGE_TOP-$advLongPageContainer.offset().top)}function delegate(){$(window).on("scroll",loadAdOnScroll).trigger("scroll")}function init(){$(".comment_box_h_main").length&&comment_header_top>ADV_LONG_PAGE_BOTTOM&&$advLongPageContainer.length&&(setContainerTopIndent(),delegate())}var $advLongPageContainer=$(".js-adv-long-page-container"),comment_header_top=$(".comment_box_h_main").offset()&&$(".comment_box_h_main").offset().top,ADV_LONG_PAGE_TOP=2400,ADV_LONG_PAGE_BOTTOM=3200;return{init:init}}().init(),$(".player_fixed, .tp_hint").length>0){var session_cookie=$.cookie("__psc"),session_data=[];void 0!==session_cookie&&session_cookie&&session_cookie.length>0&&(session_data=session_cookie.split("."),session_data[1]++),session_data[0]=void 0===session_data[0]?Math.round(Date.now()/1e3):session_data[0],session_data[1]=void 0===session_data[1]?1:session_data[1],$.cookie("__psc",session_data.join("."),{domain:ug_serv,path:"/"}),$(".tp_hint .btn-close").on("click",function(){return $(".tp_hint").remove(),$.cookie("hint_closed",1,{expires:10,path:"/",domain:ug_serv}),!1})}var $fixed_player=$(".player_fixed");if($fixed_player.length>0){var params={};if(params={bottom:$fixed_player.hasClass("player-blue")||$fixed_player.hasClass("player-float")?10:0},$fixed_player.hasClass("b-player-panel")?($fixed_player.addClass("bounceInUp").css("bottom",0),setTimeout(function(){var player_shake_counter=0;$fixed_player.removeClass("bounceInUp");var playerShakeInterval=setInterval(function(){$fixed_player.addClass("bounce"),setTimeout(function(){$fixed_player.removeClass("bounce")},1e3),++player_shake_counter>=3&&clearInterval(playerShakeInterval)},15e3);$(".js-player-bottom-animation").animate({width:100},700,"linear").delay(400).animate({width:160},400,"linear").delay(600).animate({width:370},600,"linear").delay(400).animate({width:512},500,"linear"),$(".js-fake-player-play").addClass("enabled"),setTimeout(function(){$(".js-fake-player-play").addClass("active")},7e3)},2e3)):$(".player_fixed").animate(params,600,function(){$(".js-player-bottom-animation").length>0&&($(".js-player-bottom-animation").delay(1e3).animate({width:100},700,"linear").delay(400).animate({width:160},400,"linear").delay(600).animate({width:370},600,"linear").delay(400).animate({width:512},500,"linear"),$(".js-fake-player-play").addClass("enabled"))}),$("#audio1").length>0){$.cookie("player_shown","1",{domain:ug_serv,path:"/"});try{setTimeout(function(){var audio=$("#audio1")[0];audio.oncanplay=audio.play()},900)}catch(e){}}if($(".popup-player-tp").length>0){var metrika_event=$(".popup-player-tp").hasClass("upgrade_now")?"UPGRADE_NOW":"TRY_NOW";$(".player_fixed a").click(function(){if($(".popup-player-tp:visible").length>0){try{yaCounter18746557.reachGoal("TPW_"+metrika_event+"_CLOSE")}catch(e){}return $(".popup-player-tp").hide(),$("body").off("click"),!1}$(".popup-player-tp").show();try{yaCounter18746557.reachGoal("TPW_"+metrika_event+"_SHOW")}catch(e){}return $("body").click(function(e){try{yaCounter18746557.reachGoal("TPW_"+metrika_event+"_CLOSE")}catch(e){}return $(".popup-player-tp").hide(),$("body").off("click"),!1}),!1}),$(".popup-player-tp").click(function(e){e.stopImmediatePropagation(),e.stopPropagation()}),$(".popup-player-tp .buynow").click(function(){try{yaCounter18746557.reachGoal("TPW_"+metrika_event+"_BUY")}catch(e){}return buy_now($(this).attr("href").substr(1)),$(".popup-player-tp").hide(),$("body").off("click"),!1}),$(".popup-player-tp .learnmore").click(function(){try{yaCounter18746557.reachGoal("TPW_"+metrika_event+"_LEARNMORE")}catch(e){}})}}$(".rt_b").click(function(){0==$("#js-modalTabReport").length?$.ajax({url:document.location.protocol+"//tabs"+ug_serv+"/tab/report/form?id="+tabid,dataType:"json",success:function(data){$("body").append(data),show_modal($("#js-modalTabReport"),!0)}}):show_modal($("#js-modalTabReport"),!0)}),$(".js-rate-layer-expand").click(function(e){return $(this).hide(),$(".js-rate-layer-expandanded").show(),!1}),$(".js-rate-layer-never").click(function(e){return hide_modal($("#js-modalRatingLayer")),$.cookie("disable_rate_layer","",{expires:765,path:"/"}),trackMetricaEvent("RATE_LAYER_NAVERSHOW"),!1}),$("#js-modalRatingLayer .voting a").click(function(){trackMetricaEvent("RATE_LAYER_VOTING")}),window.addEventListener("load",function(){document.querySelector("#js-modalRatingLayer")&&trackMetricaEvent("RATE_LAYER_SHOW")}),$("#js-modalRatingLayer").length>0&&show_modal($("#js-modalRatingLayer"),!1),$("#js-tab-blocked-vote").click(function(e){return user_id?$.ajax({url:document.location.protocol+"//www"+ug_serv+"/contribution/blocked/saveVote",data:{tab_id:tabid},dataType:"jsonp",
success:function(){alert("We will notify you when this tab becomes available")}}):window.UGAPP.trigger("auth:login",{}),!1}),function(){function incrementCookie(cookie,days){var count=($.cookie(cookie)?parseInt($.cookie(cookie)):0)+1,now=new Date,expires=Date.UTC(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate())+864e5*days;expires+=288e5,$.cookie(cookie,count,{expires:new Date(expires),path:"/",domain:ug_serv})}function trackPlayerEvent(type,cookie){var count=$.cookie(cookie)?parseInt($.cookie(cookie)):1,clientId=$.cookie("_ga")?$.cookie("_ga").split(".")[2]:0;$.ajax({url:"//tabs"+ug_serv+"/player_event",data:{type:type,client_id:clientId,shows:count}})}var isPlayerPanelVisible=$(".js-player-panel:visible").length>0;tpw_side_banner.canShow&&!isPlayerPanelVisible&&(incrementCookie("_ug_playerSideShowsPerDay",1),trackPlayerEvent("showPerDay","_ug_playerSideShowsPerDay")),tpw_side_banner.show(),$(".js-tpw-player-side").on("click",function(){trackPlayerEvent("clickPerDay","_ug_playerSideShowsPerDay")});var waitGaInterval=setInterval(function(){if(window.gaData||$.cookie("_ga")){clearInterval(waitGaInterval);var firstVisitTime=$.cookie("_ga")?$.cookie("_ga").split(".")[3]:0;tpw_side_banner.canShow&&0==$(".js-player-panel:visible").length&&(firstVisitTime>1469145600&&(incrementCookie("_ug_playerSideShows",730),trackPlayerEvent("show","_ug_playerSideShows")),$(".js-tpw-player-side").on("click",function(){($.cookie("_ga")?$.cookie("_ga").split(".")[3]:0)>1469145600&&trackPlayerEvent("click","_ug_playerSideShows")}))}},100)}(),{$link:$(".js-fresh-tab"),init:function(){this.$link.length&&this.addEventListeners()},addEventListeners:function(){this.$link.on("click",this.sendClickEvents),$(window).on("scroll.newVersion",this.trackShow.bind(this)).trigger("scroll.newVersion")},sendClickEvents:function(){trackMetricaEvent("LATEST_VERSION_CLICK"),ga("send","event","Tab Page","Fresh Version Info","Link click")},sendShowEvents:function(){trackMetricaEvent("LATEST_VERSION_SHOW"),ga("send","event","Tab Page","Fresh Version Info","Info show")},trackShow:function(){this.inViewport()&&("complete"==document.readyState?this.sendShowEvents():$(window).on("load",this.sendShowEvents),$(window).off("scroll.newVersion"))},inViewport:function(){return this.$link[0].getBoundingClientRect().bottom<=window.innerHeight-75}}.init()}),$(document).on("click",".cvote a",function(){comment_vote($(this).parent().attr("data"),$(this).hasClass("cplus")?10:-1)}),$(document).on("click","#js-bad-comms",function(e){return $(".comment").each(function(){$(this).attr("data-rating")<-2&&(show_bad_comments?$(this).hide():$(this).show())}),show_bad_comments?($(this).text($(this).text().replace("hide","show")),show_bad_comments=!1):($(this).text($(this).text().replace("show","hide")),show_bad_comments=!0),!1}),$("#fixed_top").click(function(){return $("html, body").animate({scrollTop:0},500),!1}),$("#fixed_add_comment").click(function(){var $form=$("#comment_form").parent().clone().addClass("float embedded");return $("body").prepend($form),right_column_position(),$("#fixed_add_comment").hide(),!1});var Chord={chord_names:{}};Chord.init=function(){for(var ch in applicature)Chord.chord_names[ch]=modulate_accord(ch,0)},Chord.convertChordName=function(chord_name){return void 0!==applicature[chord_name]?chord_name:void 0!==Chord.chord_names[chord_name]?Chord.chord_names[chord_name]:void 0};try{var parent_url=window.location!=window.parent.location?document.referrer:document.location;!window.parent||window.location==window.parent.location||parent_url.substring(0,23)===document.location.protocol+"//www.911tabs.com/"||/^https:\/\/[a-f0-9]{32}\.mtproxy\.yandex\.net\//.test(parent_url)||/^http[s]{0,1}:\/\/webvisor\.com\/inpage\/visor-player/.test(parent_url)||(window.top.location.href=window.location.href)}catch(e){}try{window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.requestAnimationFrame&&window.AudioContext&&navigator.getUserMedia&&document.querySelector(".js-tuner-btn").classList.remove("hide")}catch(e){}var facebookPopover=function(){function init(){getCookie("no_show")||(updateSessionCookie(),updateVisitCookie(),"1"!=getCookie("closed")?delegate():+getCookie("visit")>4&&(setCookie("closed",0),delegate()))}function updateSessionCookie(){var pages_cookie=getCookie("viewed_pages"),pages=pages_cookie?+pages_cookie:0;$.cookie("fb_popover_viewed_pages",++pages,{path:"/",domain:ug_serv})}function updateVisitCookie(is_reset){var sessions=0;is_reset&&setCookie("visit",sessions),"1"!=getCookie("viewed_pages")||is_reset||(sessions=+getCookie("visit"),sessions=sessions?++sessions:1,setCookie("visit",sessions))}function getCookie(name){return $.cookie("fb_popover_"+name)}function setCookie(name,val){$.cookie("fb_popover_"+name,val,{expires:365,path:"/",domain:ug_serv})}function hide(){$(dom.container).removeClass("show")}function delegate(){$(document).on("fbpopup",function(e,eventType){type=eventType,"1"!=getCookie("closed")&&setTimeout(function(){var position_class="TAB_COPY"==type||"PROTAB"==type?"has_centered":"has_bottom",protab_class="PROTAB"==type?" has_timer":"";$(dom.container).addClass("show "+position_class+protab_class),trackMetricaEvent("TAB_FB_PAGE_SHOW"),setCookie("closed",1),updateVisitCookie(!0)},300)}),$(document).on("click",dom.close,function(){hide()}),$(document).on("click",dom.close_with_you,function(){hide(),setCookie("no_show",!0)}),$(".tab_downloadcl .prosubmit").on("click",function(e){if(showed||(loadFacebookSdk(function(){try{trackMetricaEvent("FB_TAB_INIT"),FB.Event.subscribe("edge.create",function(response){trackMetricaEvent("FB_TAB_LIKE"),$(document).trigger("fbpopuplike")}),FB.Event.subscribe("edge.remove",function(response){trackMetricaEvent("FB_TAB_DISLIKE")})}catch(e){}}),showed=!0),"1"!=getCookie("closed")){e.preventDefault();var timer=null;$(document).trigger("fbpopup",["PROTAB"]),timer=setInterval(function(){var seconds=+$(dom.timer).text();--seconds?$(dom.timer).text(seconds):(clearInterval(timer),$(dom.container).removeClass("has_timer"))},1e3),setTimeout(function(){$(".tab_downloadcl").trigger("submit")},7e3)}}),$(document).on("fbpopuplike",function(){setCookie("no_show",!0),need_events=!1})}var type="",need_events=!0,showed=!1,dom={container:".js-popover-facebook",close:".js-popover-facebook-close",close_with_you:".js-popover-facebook-withyou",timer:".js-popover-facebook-timer",header:".js-popover-facebook-header"};return{init:init}}();$(document).ready(function(){facebookPopover.init()}),$(window).load(function(){}),window.fbAsyncInit=function(){+$.cookie("fb_popover_viewed_pages")>4&&$(document).trigger("fbpopup",["VISIT"])},$(function(){initHelpfulVoting(".js-version-description-question","voted_resons_tab_ids","/tab/rating/reason-helpful"),initHelpfulVoting(".js-strumming-helpful-question","voted_strumming_tab_ids","/tab/rating/strumming-helpful");for(var show_all_link=document.querySelectorAll(".js-version--description--link"),i=0;i<show_all_link.length;i++)show_all_link[i].addEventListener("click",function(event){var el_obj=event.currentTarget,el_text=event.currentTarget.previousSibling;el_obj.dataset.less=el_text.innerHTML,el_text.innerHTML=el_obj.dataset.full,el_obj.innerHTML=""})}),$(".js-correct-tab").on("click",function(event){if(user_id){try{yaCounter18746557.reachGoal("CORRECT_REGISTERED_USER")}catch(e){}ga_track_event(["_trackEvent","Tab Page","Correct","Correct Reg click"])}else{event.preventDefault();try{yaCounter18746557.reachGoal("CORRECT_UNREGISTERED_USER")}catch(e){}ga_track_event(["_trackEvent","Tab Page","Correct","Correct UnReg click"]),window.UGAPP.trigger("auth:login",{callback:toCreateCorrection})}});