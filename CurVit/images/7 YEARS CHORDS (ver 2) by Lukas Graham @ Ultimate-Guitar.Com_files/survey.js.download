!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/static/plus/js/bin/",e(e.s="DET6")}({DET6:function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=(r("rplX"),r("Dsoy")),i=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.model=e,this.kind=this.model.data.kind?this.model.data.kind:"base",this.mode=this.model.data.mode,this.kindStapCurrentStep=1,this.stepTextQuestions=this.model.data.stepTextQuestions,1==$(this.dom.banner).length&&($(this.dom.banner).removeClass("hide"),this.model.logBannerShown(),this.delegateBanner()),$(this.dom.form).length>0&&(this.numericOptions=this.model.data.numericOptions?this.model.data.numericOptions:[],this.textOptions=this.model.data.textOptions?this.model.data.textOptions:[],this.requiredOptions=this.model.data.requiredOptions?this.model.data.requiredOptions:[],this.model.data.fillHiddenFieldsFromUrlParams&&this.fillHiddenFieldsFromUrlParams(this.model.data.fillHiddenFieldsFromUrlParams),"base"==this.kind?this.processBaseKind():"qualarroo"==this.kind?this.processQualarrooKind():"step"==this.kind&&this.processStepKind())}return t.prototype.fillHiddenFieldsFromUrlParams=function(t){for(var e=this.numericOptions.length,r=this.textOptions.length,o=$(this.dom.form),n=0;n<t.length;n++){var i,s=t[n],a=this.getUrlParams()[s.name];"numeric"==s.type?(e++,i="an"+e,this.numericOptions.push(i)):"text"==s.type&&(r++,i="at"+r,this.textOptions.push(i)),i&&(this.requiredOptions.push(i),o.prepend('<input type="hidden" name="'+i+'" value="'+a+'" />'))}},t.prototype.resetForm=function(){for(var t=0;t<this.requiredOptions.length;t++)$(".survey-error-el").removeClass("survey-error-el")},t.prototype.prepareData=function(){var t={};"standalone"==this.mode&&(t.page_url=document.referrer);var e=["n","t"];for(var r in e)for(var o="n"==e[r]?this.numericOptions:this.textOptions,n=0;n<o.length;n++){var i=$("[name="+o[n]+"]");"radio"==i.attr("type")&&(i=$("[name="+o[n]+"]:checked")),t["a"+e[r]+(n+1)]=i.val()}return t},t.prototype.addVote=function(t){this.model.addVote(this.prepareData(),t)},t.prototype.replaceVote=function(t){this.model.replaceVote(this.prepareData(),t)},t.prototype.check=function(){for(var t=!0,e=!1,r=0;r<this.requiredOptions.length;r++){var o=$("[name="+this.requiredOptions[r]+"]");if("radio"==o.attr("type")&&(o=$("input[type=radio][name="+this.requiredOptions[r]+"]:checked")),"radio"==o.attr("type")&&0==o.length||"radio"!=o.attr("type")&&!o.val()){t=!1;var n=$("[name="+this.requiredOptions[r]+"]").closest("td, section");n.length>0?n.addClass("survey-error-el"):o.addClass("survey-error-el"),e||(e=!0,$("[name="+this.requiredOptions[r]+"]:first").focus())}}return t},t.prototype.delegateBanner=function(){var t=document.querySelector(this.dom.bannerClose);t&&t.addEventListener("click",function(){document.querySelector(this.dom.banner).classList.add("hide"),this.model.logBannerClosed()}.bind(this));var e=document.querySelector(this.dom.link);e&&e.addEventListener("click",function(){this.model.logBannerClicked()}.bind(this))},t.prototype.processQualarrooKind=function(){this.isCollapsed()&&$(this.dom.survey).addClass("collapsed"),$(this.dom.survey).removeClass("hide"),this.model.logSurveyShown(),this.delegateQualarrooKind()},t.prototype.delegateQualarrooKind=function(){var t=this,e=$(this.dom.stepSelect).data("enabled");e&&this.delegateQualarrooKindStepSelect(),$(this.dom.expandCollapse).on("click",function(){this.isCollapsed()?($(this.dom.survey).removeClass("collapsed"),$.cookie("adv_survey_"+this.model.data.id+"_collapsed",0,{path:"/",expires:-1})):($(this.dom.survey).addClass("collapsed"),$.cookie("adv_survey_"+this.model.data.id+"_collapsed",1,{path:"/",expires:365}))}.bind(this)),$(this.dom.form0+" input[type=radio]").on("click",function(t){this.check()&&($(this.dom.stepOptions0).addClass("hide"),$(this.dom.stepOptions).removeClass("hide"))}.bind(this)),$(this.dom.form+" input[type=radio]").on("click",function(r){t.check()&&($(t.dom.stepOptions).addClass("hide"),$(t.dom.stepText).data("enabled")?(t.delegateQualarrooKindStepText($(r.target).val()),$(t.dom.stepText).removeClass("hide")):e?$(t.dom.stepSelect).removeClass("hide"):$(t.dom.stepThanks).removeClass("hide"))})},t.prototype.delegateQualarrooKindStepText=function(t){var e=this,r=$(this.dom.stepText).find("textarea");0==r.length&&(r=$(this.dom.stepText).find('input[type="text"]')),r.on("input propertychange",function(t){$(t.target).val()?$(e.dom.submit).removeClass("disabled"):$(e.dom.submit).addClass("disabled")}),this.stepTextQuestions&&this.stepTextQuestions[t]&&$(this.dom.stepTextQuestion).html(this.stepTextQuestions[t]),$(this.dom.submit).on("click",function(){$(this.dom.stepText).find("textarea").val()&&this.check()&&($(this.dom.stepText).addClass("hide"),$(this.dom.stepThanks).removeClass("hide"),this.replaceVote(function(){$(this.dom.survey).hide(300)}.bind(this)))}.bind(this))},t.prototype.delegateQualarrooKindStepSelect=function(){$(this.dom.stepSelect+" input[type=radio]").on("click",function(t){this.check()&&($(this.dom.stepSelect).addClass("hide"),$(this.dom.stepThanks).removeClass("hide"),this.replaceVote(function(){$(this.dom.survey).hide(300)}.bind(this)))}.bind(this))},t.prototype.processBaseKind=function(){this.model.logSurveyShown(),this.delegateBaseKind()},t.prototype.processStepKind=function(){this.model.logSurveyShown(),this.delegateStepKind()},t.prototype.delegateBaseKind=function(){var t=this;$(this.dom.close).on("click",function(e){$(t.dom.survey).addClass("hide"),t.model.logSurveyClosed()}),$(this.dom.form).submit(function(e){return t.resetForm(),t.check()&&($(t.dom.submitContainer).html(t.tpl.loading),t.addVote(function(){$(this.dom.survey).addClass("hide"),"standalone"==this.mode&&$(this.dom.main).html(this.tpl.thanks)}.bind(t))),!1})},t.prototype.delegateStepKind=function(){var t=this;$(this.dom.close).on("click",function(e){$(t.dom.survey).addClass("hide"),t.model.logSurveyClosed()}),$(this.dom.form).submit(function(e){return t.resetForm(),t.check()&&($(t.dom.submitContainer).html(t.tpl.loading),t.replaceVote(function(){this.kindStapCurrentStep<$(this.dom.surveyStep).length?($(this.dom.surveyStep).eq(this.kindStapCurrentStep-1).hide(),$(this.dom.surveyStep).eq(this.kindStapCurrentStep).show(),++this.kindStapCurrentStep==$(this.dom.surveyStep).length&&$(this.dom.submitBtn).html("Submit")):$(this.dom.main).html(this.tpl.thanks)}.bind(t))),!1})},t.prototype.getUrlParams=function(){for(var t,e=/\+/g,r=/([^&=]+)=?([^&]*)/g,o=function(t){return decodeURIComponent(t.replace(e," "))},n=window.location.search.substring(1),i={};t=r.exec(n);)i[o(t[1])]=o(t[2]);return i},t.prototype.isCollapsed=function(){return!!$.cookie("adv_survey_"+this.model.data.id+"_collapsed")},i(t,[{key:"dom",get:function(){return{survey:".js-survey",banner:".js-survey-banner",link:".js-survey-link",bannerClose:".js-survey-banner-close",close:".js-survey-close",expandCollapse:".js-expand-collapse",stepOptions0:".js-survey-step-options-0",stepOptions:".js-survey-step-options",stepText:".js-survey-step-text",stepSelect:".js-survey-step-select",stepTextQuestion:".js-survey-step-text-question",stepThanks:".js-survey-step-thanks",main:"main",form0:".js-survey-form-0",form:".js-survey-form",submit:".js-survey-submit",submitContainer:".js-survey-submit-container",submitBtn:".js-survey-submit-btn",surveyStep:".js-survey-step"}}},{key:"tpl",get:function(){return{loading:'<div style="font-size: 13px; line-height: 36px; margin: 13px auto 26px"><b>Loading...</b></div>',thanks:'<div style="width: 100%; text-align: center; margin-top: 50%; font-size: 24px">Thank you for taking the time to complete this survey</div>'}}}]),t}(),a=function(){};a.prototype.init=function(t){var e=new n.a(t);t.check?e.fetchSurveyItem(function(r){"ok"==r.result&&(new s(e),"function"==typeof t.initSuccess&&t.initSuccess())}):(new s(e),"function"==typeof t.initSuccess&&t.initSuccess())},window.survey=new a},Dsoy:function(t,e,r){"use strict";(function(t){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",function(){return i});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),i=function(){function e(t){o(this,e),this.psServ=t.psServ?t.psServ:"",this.data=t,this.cookieDomain=window.location.host.substr(window.location.host.indexOf("."))}return e.prototype.log=function(e){t(this.url.log+"?id="+this.data.id+"&event="+e,{method:"post",credentials:"include"})},e.prototype.logBannerShown=function(){this.log("BANNER_SHOWN")},e.prototype.logBannerClicked=function(){this.log("BANNER_CLICKED")},e.prototype.logBannerClosed=function(){this.log("BANNER_CLOSED");var t=new Date((new Date).getTime()+12096e5);document.cookie="adv_banner_"+this.data.id+"_closed=1; path=/; expires="+t+"; domain="+this.cookieDomain},e.prototype.logSurveyShown=function(){this.log("SURVEY_SHOWN")},e.prototype.logSurveyClosed=function(){this.log("SURVEY_CLOSED");var t=new Date((new Date).getTime()+12096e5);document.cookie="adv_survey_"+this.data.id+"_closed=1; path=/; expires="+t+"; domain="+this.cookieDomain},e.prototype.fetchSurveyItem=function(e){t(this.url.item+this.data.id,{method:"get",credentials:"include"}).then(function(t){window.surveyResponse=t,200===t.status&&t.json().then(function(t){e&&"function"==typeof e&&e(t)})})},e.prototype.addVote=function(t,e,r){this.processVote("add",t,e,r)},e.prototype.replaceVote=function(t,e,r){this.processVote("replace",t,e,r)},e.prototype.processVote=function(t,e,r,o){var n=this;e.id=this.data.id,e.action=t,e.user_agent=navigator.userAgent,e.page_url=e.page_url?e.page_url:window.location.href,$.jsonp({url:this.url.vote,callbackParameter:"callback",timeout:5e3,data:{survey:e},success:function(){"function"==typeof r&&r();var t=new Date((new Date).getTime()+7776e6);document.cookie="adv_survey_"+n.data.id+"_voted=1; path=/; expires="+t+"; domain="+n.cookieDomain}})},n(e,[{key:"url",get:function(){return{item:this.psServ+"/ajax/survey/",log:this.psServ+"/adv-survey/event/log",vote:this.psServ+"/ajax/adv-survey/vote"}}}]),e}()}).call(e,r("rp8n"))},DuR2:function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},rp8n:function(t,e,r){(function(e){(function(){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function d(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(b.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(b.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(b.arrayBuffer&&b.blob&&w(t))this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!g(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=h(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var r=e.body;if("string"==typeof t)this.url=t;else{if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new n(e.headers)),this.method=p(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function y(t){var e=new n;return t.split("\r\n").forEach(function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n)}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new n(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var b={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(b.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(t){return t&&DataView.prototype.isPrototypeOf(t)},g=ArrayBuffer.isView||function(t){return t&&v.indexOf(Object.prototype.toString.call(t))>-1};n.prototype.append=function(t,o){t=e(t),o=r(o);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(o)},n.prototype.delete=function(t){delete this.map[e(t)]},n.prototype.get=function(t){var r=this.map[e(t)];return r?r[0]:null},n.prototype.getAll=function(t){return this.map[e(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(t,o){this.map[e(t)]=[r(o)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(o){t.call(e,o,r,this)},this)},this)},n.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),o(t)},n.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},n.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),o(t)},b.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},l.call(c.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];m.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=n,t.Request=c,t.Response=m,t.fetch=function(t,e){return new Promise(function(r,o){var n=new c(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new m(e,t))},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request failed"))},i.open(n.method,n.url,!0),"include"===n.credentials&&(i.withCredentials=!0),"responseType"in i&&b.blob&&(i.responseType="blob"),n.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===n._bodyInit?null:n._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),t.exports=e.fetch}).call(e)}).call(e,r("DuR2"))},rplX:function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function d(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(b.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(b.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(b.arrayBuffer&&b.blob&&w(t))this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!g(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=h(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var r=e.body;if("string"==typeof t)this.url=t;else{if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new n(e.headers)),this.method=p(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function y(t){var e=new n;return t.split("\r\n").forEach(function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n)}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new n(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var b={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(b.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(t){return t&&DataView.prototype.isPrototypeOf(t)},g=ArrayBuffer.isView||function(t){return t&&v.indexOf(Object.prototype.toString.call(t))>-1};n.prototype.append=function(t,o){t=e(t),o=r(o);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(o)},n.prototype.delete=function(t){delete this.map[e(t)]},n.prototype.get=function(t){var r=this.map[e(t)];return r?r[0]:null},n.prototype.getAll=function(t){return this.map[e(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(t,o){this.map[e(t)]=[r(o)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(o){t.call(e,o,r,this)},this)},this)},n.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),o(t)},n.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},n.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),o(t)},b.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},l.call(c.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];m.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=n,t.Request=c,t.Response=m,t.fetch=function(t,e){return new Promise(function(r,o){var n=new c(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new m(e,t))},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request failed"))},i.open(n.method,n.url,!0),"include"===n.credentials&&(i.withCredentials=!0),"responseType"in i&&b.blob&&(i.responseType="blob"),n.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===n._bodyInit?null:n._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)}});